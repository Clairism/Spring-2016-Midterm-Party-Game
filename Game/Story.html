<!DOCTYPE html>
<html>
<head>
	<link rel="stylesheet" type="text/css" href="style.css">
	<script src="//code.jquery.com/jquery-1.12.0.min.js"></script>
	<script src="https://cdn.firebase.com/js/client/2.3.2/firebase.js"></script>


</head>
<body>

	<script type="text/javascript">

		var images = new Firebase("https://incandescent-heat-4986.firebaseio.com/images/")

		var largeImg = "";
		var dirtyImg = "";
		var uglyImg = "";
		var softImg = "";

		images.once("value", function(snapshot){
			//var mostSilly = "";	

			var largeVotes = 0;
			var dirtyVotes = 0;
			var uglyVotes = 0;
			var softVotes = 0;

			snapshot.forEach(function(childSnapshot){

				//var key = childSnapshot.key();

				var childData = childSnapshot.val();

				if (childData.VotesForLarge > largeVotes)
				{
					largeVotes = childData.VotesForLarge;
					largeImg = childData.filename;
				}

				if (childData.VotesForDirty > dirtyVotes)
				{
					dirtyVotes = childData.votesForDirty;
					dirtyImg = childData.filename;
				}

				if (childData.VotesForUgly > uglyVotes)
				{
					uglyVotes = childData.VotesForUgly;
					uglyImg = childData.filename;
				}
				
				if (childData.VotesForSoft > softVotes)
				{
					softVotes = childData.VotesForSoft;
					softImg = childData.filename;
				}


			});

			console.log(largeImg, dirtyImg, uglyImg, softImg, largeVotes);
			console.log("dirtyImg:" + dirtyImg);
			console.log("uglyImg:" + uglyImg);
			console.log("dirtyVotes:" + dirtyVotes);
			console.log("largeVotes:" + largeVotes);
			console.log("uglyVotes:" + uglyVotes);

			var large = document.getElementById('large');
			large.src = "uploads/" + largeImg;
			//console.log(large.src);

			var dirty = document.getElementById('dirty');
			dirty.src = "uploads/" + dirtyImg;

			var ugly = document.getElementById('ugly');
			ugly.src = "uploads/" + uglyImg;

			var soft = document.getElementById('soft');
			soft.src = "uploads/" + softImg;

		});

</script>

<h1>One Day</h1>

<style type="text/css">

	img {
		margin-bottom: 100px;
		max-width: 350px;
		max-height: auto;
		padding-bottom: 30px;

	}

	.TextWrap{
		float: right;
		margin: 10px;
	}

</style>

<p>
	<img id="large"> is pretty large.<br />
	<img id="silly"> is very silly.<br />

	<!-- (dirty obj) -->
	<!-- <img src="uploads/soft.jpeg">  -->
	's birthday party was a disaster.<br />
	It stated going downhill when <span id="player2-output"></span> arrived, bringing a <span id="dirty-output"></span> as his/her gift. <br />

	<br /><span id="player1-output"></span> had to pretend he/she liked it, even though it was the worst.<br />

	<!-- (large obj) -->
	<br />Then <span id="player3-output"></span> took over the party playlist and played nothing but Elton John. It infuriated <span id="player4-output"></span> and he/she threw a/an <span id="large-output"></span> at the stereo. Completely destroying both.<br />

	<!-- (ugly obj) -->
	<br /><span id="player1-output"></span> was especially looking forward to the cake. When the cake came out the bakery has drawn a/an <span id="ugly-output"></span> on it. What the fuck!<br />

	<!-- (soft obj) -->
	<br /><span id="player1-output"></span> clutched his/her favorite <span id="soft-output"></span> and cried.<br />
</p>

</body>
</html>